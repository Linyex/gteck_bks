# ДОКУМЕНТАЦИЯ ПРОЕКТА: Гомельский торгово-экономический колледж

## 1. ОБЩАЯ ИНФОРМАЦИЯ

**Название проекта:** Официальный сайт Гомельского торгово-экономического колледжа Белкоопсоюза  
**URL:** gtec-bks.by  
**Архитектура:** MVC (Model-View-Controller)  
**Язык программирования:** PHP 7+  
**База данных:** MySQL  
**Фреймворк:** Собственный MVC фреймворк  

## 2. СТРУКТУРА ПРОЕКТА

```
nocontrgtec/
├── index.php                 # Точка входа в приложение
├── .htaccess                # Конфигурация Apache (ЧПУ, редиректы)
├── migrate.php              # Скрипт миграции старой архитектуры
├── application/             # Основная папка приложения
│   ├── config.php          # Конфигурация приложения
│   ├── controllers/        # Контроллеры
│   ├── models/            # Модели данных
│   └── views/             # Представления (шаблоны)
├── engine/                 # Ядро фреймворка
│   ├── Router.php         # Маршрутизатор
│   ├── BaseController.php # Базовый контроллер
│   ├── Database.php       # Класс для работы с БД
│   └── libs/             # Библиотеки
└── assets/                # Статические ресурсы
    ├── css/              # Стили
    ├── js/               # JavaScript
    ├── media/            # Медиафайлы
    └── files/            # Загружаемые файлы
```

## 3. АРХИТЕКТУРА ФРЕЙМВОРКА

### 3.1 Точка входа (index.php)
- Инициализация кодировки UTF-8
- Подключение основных классов
- Создание роутера
- Диспетчеризация запросов

### 3.2 Маршрутизатор (Router.php)
**Основные функции:**
- Парсинг URL
- Определение контроллера и действия
- Обработка 404 ошибок
- Поддержка вложенных контроллеров

**Стандартные маршруты:**
```php
'' => ['controller' => 'main', 'action' => 'index']
'news' => ['controller' => 'news', 'action' => 'index']
'admin' => ['controller' => 'admin', 'action' => 'index']
'stud' => ['controller' => 'stud', 'action' => 'index']
'prepod' => ['controller' => 'prepod', 'action' => 'index']
'kol' => ['controller' => 'kol', 'action' => 'index']
'abut' => ['controller' => 'abut', 'action' => 'index']
'okno' => ['controller' => 'okno', 'action' => 'index']
'dopage' => ['controller' => 'dopage', 'action' => 'index']
'search' => ['controller' => 'search', 'action' => 'index']
'message' => ['controller' => 'message', 'action' => 'index']
'files' => ['controller' => 'files', 'action' => 'index']
'error' => ['controller' => 'error', 'action' => 'index']
```

### 3.3 Базовый контроллер (BaseController.php)
**Основные методы:**
- `loadModel($modelName)` - загрузка модели
- `render($view, $data)` - рендеринг с header/footer
- `renderPartial($view, $data)` - рендеринг без header/footer
- `jsonResponse($data)` - JSON ответ
- `redirect($url)` - редирект
- `getPost($key)` - получение POST данных
- `getGet($key)` - получение GET данных
- `isAjax()` - проверка AJAX запроса

### 3.4 База данных (Database.php)
**Основные методы:**
- `query($sql, $params)` - выполнение запроса
- `fetch($sql, $params)` - получение одной записи
- `fetchAll($sql, $params)` - получение всех записей
- `insert($table, $data)` - вставка данных
- `update($table, $data, $where, $whereParams)` - обновление
- `delete($table, $where, $params)` - удаление
- `count($table, $where, $params)` - подсчет записей

## 4. КОНТРОЛЛЕРЫ

### 4.1 Основные контроллеры

#### mainController
**Методы:**
- `index($page)` - главная страница с новостями и пагинацией
- `ajax()` - AJAX поиск по сайту

**Функциональность:**
- Отображение слайдера с информацией о колледже
- Боковая панель с поиском и быстрой информацией
- Секция новостей с карточками
- Поиск по файлам сайта

#### newsController
**Методы:**
- `index()` - список всех новостей
- `view($id)` - просмотр конкретной новости
- `category($category)` - новости по категории

#### adminController
**Методы:**
- `index()` - главная страница админки
- `login()` - авторизация администратора
- `logout()` - выход из админки

**Аутентификация:**
- Простая аутентификация (admin/admin)
- Сессионное управление
- Защищенные маршруты

#### studController
**Методы:**
- `index()` - главная страница для студентов
- `admin_upload()` - загрузка файлов студентами
- Различные разделы для студентов

#### abutController
**Методы:**
- `index()` - информация для абитуриентов
- Различные разделы для поступающих

### 4.2 Специализированные контроллеры

#### dopageController
- Дополнительные страницы сайта
- FAQ, спорт, социальная работа и т.д.

#### kolController
- Информация о колледже
- История, контакты, достижения

#### oknoController
- Служба "Одно окно"
- Административные процедуры

#### searchController
- Поиск по сайту
- AJAX функциональность

## 5. МОДЕЛИ

### 5.1 newsModel
**Основные методы:**
- `createNews($data)` - создание новости
- `getnews($data, $joins, $sort, $options)` - получение новостей
- `getTotalnews($data)` - подсчет новостей
- `getNewsById($newsId, $joins)` - получение по ID
- `updateNews($newsId, $data)` - обновление
- `deleteNews($newsId)` - удаление

### 5.2 zamenaModel
- Управление заменами в расписании
- Получение последних изменений

### 5.3 Другие модели
- `usersModel` - пользователи
- `filesModel` - файлы
- `photosModel` - фотографии
- `groupsModel` - группы
- `listgrModel` - списки групп

## 6. ПРЕДСТАВЛЕНИЯ (VIEWS)

### 6.1 Структура views
```
views/
├── common/           # Общие элементы
│   ├── header.php   # Шапка сайта
│   └── footer.php   # Подвал сайта
├── mane/            # Главная страница
├── news/            # Новости
├── admin/           # Админка
├── stud/            # Студенты
├── abut/            # Абитуриенты
├── kol/             # О колледже
├── okno/            # Одно окно
├── dopage/          # Дополнительные страницы
└── error/           # Страницы ошибок
```

### 6.2 Главная страница (mane/mane.php)
**Компоненты:**
- Hero секция со слайдером
- Боковая панель с поиском и информацией
- Секция новостей с карточками
- Пагинация

### 6.3 Админка
**Структура:**
- Авторизация
- Управление новостями
- Управление файлами
- Управление пользователями
- Настройки

## 7. СТИЛИ И ДИЗАЙН

### 7.1 Основные CSS файлы
- `modern.css` - современный дизайн (24KB)
- `gtec.css` - основной стиль (41KB)
- `bootstrap.css` - Bootstrap фреймворк
- `font-awesome.css` - иконки

### 7.2 Современный дизайн (modern.css)
**Особенности:**
- Hi-tech стиль
- Градиенты и тени
- Анимации (AOS)
- Адаптивный дизайн
- Современная типографика (Inter)

**Компоненты:**
- Header с навигацией
- Hero секция со слайдером
- Карточки новостей
- Боковые панели
- Footer с виджетами

## 8. КОНФИГУРАЦИЯ

### 8.1 Основная конфигурация (config.php)
```php
[
    'title' => 'Главная | Гомельский торгово-экономический колледж',
    'description' => 'Гомельский торгово-экономический колледж',
    'keywords' => '...',
    'url' => '/',
    'token' => 'MYTOKEN',
    'db_type' => 'mysql',
    'db_hostname' => 'localhost',
    'db_username' => 'root',
    'db_password' => '',
    'db_database' => 'gtecbks_db'
]
```

### 8.2 .htaccess конфигурация
**Функции:**
- ЧПУ (Человекопонятные URL)
- Защита от хотлинкинга изображений
- Обработка 404 ошибок
- Редиректы

## 9. ФУНКЦИОНАЛЬНОСТЬ

### 9.1 Поиск
- AJAX поиск по файлам сайта
- Подсветка результатов
- Пагинация результатов

### 9.2 Новости
- Категории новостей
- Изображения к новостям
- Пагинация
- Просмотр отдельных новостей

### 9.3 Админка
- CRUD операции для новостей
- Управление файлами
- Управление пользователями
- Загрузка изображений

### 9.4 Студенческий раздел
- Загрузка файлов студентами
- Управление документами
- Различные разделы для студентов

## 10. БЕЗОПАСНОСТЬ

### 10.1 Защита от атак
- PDO с подготовленными запросами
- Валидация входных данных
- Защита от XSS
- Защита от CSRF

### 10.2 Аутентификация
- Сессионное управление
- Простая аутентификация админа
- Защищенные маршруты

## 11. ПРОИЗВОДИТЕЛЬНОСТЬ

### 11.1 Оптимизация
- Буферизация вывода
- Минификация CSS
- Оптимизация изображений
- Кэширование

### 11.2 База данных
- Индексы для быстрого поиска
- Оптимизированные запросы
- Подготовленные запросы

## 12. РАЗВИТИЕ ПРОЕКТА

### 12.1 Миграция
- Скрипт migrate.php для переноса старой архитектуры
- Постепенная миграция контроллеров
- Обновление view файлов

### 12.2 Планы развития
- Улучшение безопасности
- Добавление новых функций
- Оптимизация производительности
- Модернизация дизайна

## 13. ТЕХНИЧЕСКАЯ ПОДДЕРЖКА

### 13.1 Требования к серверу
- PHP 7.0+
- MySQL 5.7+
- Apache с mod_rewrite
- Поддержка UTF-8

### 13.2 Установка
1. Скопировать файлы на сервер
2. Настроить .htaccess
3. Создать базу данных
4. Настроить config.php
5. Запустить migrate.php

## 14. ВАЖНЫЕ ФАЙЛЫ И КОМПОНЕНТЫ

### 14.1 Ключевые файлы
- `index.php` - точка входа
- `engine/Router.php` - маршрутизация
- `engine/BaseController.php` - базовый контроллер
- `engine/Database.php` - работа с БД
- `application/config.php` - конфигурация
- `application/views/common/header.php` - шапка сайта
- `application/views/mane/mane.php` - главная страница
- `assets/css/modern.css` - современные стили

### 14.2 База данных
- `dkrjointable (1).sql` - структура таблиц
- `dkrgroups (1).sql` - группы
- `dkrfiles (1).sql` - файлы

### 14.3 Контроллеры
- `main.php` - главная страница
- `news.php` - новости
- `admin.php` - админка
- `stud.php` - студенты
- `abut.php` - абитуриенты
- `dopage.php` - дополнительные страницы

### 14.4 Модели
- `news.php` - новости
- `zamena.php` - замены
- `users.php` - пользователи
- `files.php` - файлы
- `photos.php` - фотографии

## 15. РАЗРАБОТКА И ОТЛАДКА

### 15.1 Логирование
- Ошибки PHP записываются в лог
- SQL ошибки обрабатываются
- AJAX запросы логируются

### 15.2 Отладка
- Проверка подключения к БД
- Тестирование маршрутов
- Валидация данных

### 15.3 Тестирование
- Функциональное тестирование
- Тестирование безопасности
- Тестирование производительности

Эта документация поможет в дальнейшей работе с проектом, понимании архитектуры и внесении изменений. 
