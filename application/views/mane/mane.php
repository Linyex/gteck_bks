<div class="container-fluid">
  <!-- Hero Section with Slider -->
  <section class="hero-section" data-aos="fade-up">
    <div class="row">
      <div class="col-lg-8">
        <div class="hero-slider">
          <div class="slider-item active">
            <div class="slider-div-image">
              <div class="animated-background">
                <div class="floating-elements">
                  <div class="element">üéì</div>
                  <div class="element">üìö</div>
                  <div class="element">‚ö°</div>
                  <div class="element">üí°</div>
                </div>
                <div class="gradient-overlay"></div>
                <div class="content-overlay">
                  <h2>–ü—Ä–∏–µ–º–Ω–∞—è –∫–∞–º–ø–∞–Ω–∏—è 2025</h2>
                  <p>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –ì–æ–º–µ–ª—å—Å–∫–∏–π —Ç–æ—Ä–≥–æ–≤–æ-—ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–π –∫–æ–ª–ª–µ–¥–∂ –ë–µ–ª–∫–æ–æ–ø—Å–æ—é–∑–∞</p>
                </div>
              </div>
            </div>
          </div>
          <div class="slider-item">
            <div class="slider-div-image">
              <div class="animated-background">
                <div class="floating-elements">
                  <div class="element">üèõÔ∏è</div>
                  <div class="element">üìñ</div>
                  <div class="element">üî¨</div>
                  <div class="element">üéØ</div>
                </div>
                <div class="gradient-overlay"></div>
                <div class="content-overlay">
                  <h2>–£—á—Ä–µ–∂–¥–µ–Ω–∏–µ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è "–ì–æ–º–µ–ª—å—Å–∫–∏–π —Ç–æ—Ä–≥–æ–≤–æ-—ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–π –∫–æ–ª–ª–µ–¥–∂" –ë–µ–ª–∫–æ–æ–ø—Å–æ—é–∑–∞</h2>
                </div>
              </div>
            </div>
          </div>
          <div class="slider-item">
            <div class="slider-div-image">
              <div class="animated-background">
                <div class="floating-elements">
                  <div class="element">‚öñÔ∏è</div>
                  <div class="element">üõí</div>
                  <div class="element">üìä</div>
                  <div class="element">üíª</div>
                </div>
                <div class="gradient-overlay"></div>
                <div class="content-overlay">
                  <h2>–û–±—É—á–µ–Ω–∏–µ –ø–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—è–º:</h2>
                  <ul>
                    <li>–ü—Ä–∞–≤–æ–≤–µ–¥–µ–Ω–∏–µ</li>
                    <li>–¢–æ—Ä–≥–æ–≤–∞—è –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç—å</li>
                    <li>–ë—É—Ö. —É—á–µ—Ç, –∞–Ω–∞–ª–∏–∑ –∏ –∫–æ–Ω—Ç—Ä–æ–ª—å</li>
                    <li>–ü–ª–∞–Ω–æ–≤–æ-—ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∞—è –∏ –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∞—è –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç—å</li>
                    <li>–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –∏ —Å–æ–ø—Ä–æ–≤–æ–∂–¥–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º</li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-lg-4">
        <div class="hero-sidebar">
          <!-- Search -->
          <div class="search-widget" data-aos="fade-left">
            <h4><i class="fa fa-search"></i> –ü–æ–∏—Å–∫ –ø–æ —Å–∞–π—Ç—É</h4>
            <form id="searchForm" method="POST">
              <div class="search-input">
                <input type="text" name="Search_text" id="Search_text" placeholder="–ü–æ–∏—Å–∫ –ø–æ —Å–∞–π—Ç—É..">
                <button type="submit" class="search-btn"><i class="fa fa-search"></i></button>
              </div>
            </form>
            <div class="search-results" id="searchResults"></div>
          </div>
          <!-- Quick Info -->
          <div class="quick-info" data-aos="fade-left" data-aos-delay="100">
            <h4><i class="fa fa-info-circle"></i> –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h4>
            <?php if (!empty($lastzamena['zamena_file'])): ?>
              <div class="info-item">
                <a href="/<?php echo ($lastzamena['zamena_file']) ?>" target="_blank" class="info-link">
                  <i class="fa fa-calendar"></i>
                  <span>–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–∏<br><?php echo $lastzamena['zamena_text'] ?></span>
                </a>
              </div>
            <?php else: ?>
              <div class="info-item">
                <span class="info-text"><i class="fa fa-check"></i> –ò–∑–º–µ–Ω–µ–Ω–∏–π –≤ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–∏ –Ω–µ—Ç</span>
              </div>
            <?php endif; ?>
            
            <div class="info-item">
              <a href="https://docs.google.com/spreadsheets/d/1YGUg5U5KBQWBqi88gi8SCAEQTnf_CtDZs_U1usbUj7o/edit?usp=sharing" target="_blank" class="info-link">
                <i class="fa fa-chart-line"></i>
                <span>–•–æ–¥ –ø—Ä–∏—ë–º–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤</span>
              </a>
            </div>
            
            <div class="info-item">
              <a href="/assets/files/‚Ññ 88 –æ—Ç 27.03.2025 –û–± —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–∏ –ü–æ—Ä—è–¥–∫–∞ –ø—Ä–∏–µ–º–∞ –Ω–∞ 2025 –≥–æ–¥.pdf" target="_blank" class="info-link">
                <i class="fa fa-file-pdf-o"></i>
                <span>–ü–æ—Ä—è–¥–æ–∫ –ø—Ä–∏—ë–º–∞ –∞–±–∏—Ç—É—Ä–∏–µ–Ω—Ç–æ–≤ 2025 –≥–æ–¥</span>
              </a>
            </div>
          </div>

          <!-- Contacts -->
          <div class="contacts-widget" data-aos="fade-left" data-aos-delay="200">
            <h4><i class="fa fa-phone"></i> –ö–æ–Ω—Ç–∞–∫—Ç—ã</h4>
            <div class="contact-info">
              <p><i class="fa fa-map-marker"></i> 246017, –≥. –ì–æ–º–µ–ª—å, —É–ª. –ü—Ä–∏–≤–æ–∫–∑–∞–ª—å–Ω–∞—è, 4</p>
              <p><i class="fa fa-envelope"></i> gtec@mail.gomel.by</p>
              <p><i class="fa fa-phone"></i> 8(0232) 33-70-02</p>
              <p><i class="fa fa-phone"></i> –ü—Ä–∏–µ–º–Ω–∞—è –∫–æ–º–∏—Å—Å–∏—è: +375 232 20-22-14</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- News Section -->
  <section class="news-section" data-aos="fade-up">
    <div class="row">
      <div class="col-12">
        <div class="section-header">
          <h2 class="section-title">–ù–æ–≤–æ—Å—Ç–∏</h2>
          <?php if($total_news > $limit): ?>
            <a href="/news" class="btn-view-all">
              <i class="fa fa-newspaper-o"></i>
              –í—Å–µ –Ω–æ–≤–æ—Å—Ç–∏ (<?php echo $total_news ?>)
            </a>
          <?php endif; ?>
        </div>
        <hr class="section-divider">
      </div>
    </div>
    
    <?php if(empty($news)): ?>
      <div class="row">
        <div class="col-12">
          <div class="no-news">
            <i class="fa fa-newspaper-o"></i>
            <p>–ù–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –Ω–µ—Ç –Ω–æ–≤–æ—Å—Ç–µ–π</p>
          </div>
        </div>
      </div>
    <?php else: ?>
      <div class="news-grid">
        <?php foreach($news as $item): ?>
        <div class="news-card" data-aos="fade-up">
          <div class="news-image">
            <a href="/<?php echo $item['news_image'] ?>" data-fancybox="gallery">
              <img src="/<?php echo $item['news_image'] ?>" alt="<?php echo $item['news_title'] ?>">
              <div class="news-overlay">
                <i class="fa fa-search"></i>
              </div>
            </a>
          </div>
          <div class="news-content">
            <div class="news-meta">
              <span class="news-date">
                <i class="fa fa-calendar"></i>
                <?php echo date("d.m.Y", strtotime($item['news_date_add'])) ?>
              </span>
              <span class="news-category">
                <a href="/news/category/mane/<?php echo $item['category_name'] ?>">
                  <?php echo $item['category_text'] ?>
                </a>
              </span>
            </div>
            <h3 class="news-title">
              <a href="/news/view/mane/<?php echo $item['news_id'] ?>">
                <?php echo $item['news_title'] ?>
              </a>
            </h3>
            <div class="news-excerpt">
              <?php 
                $string = mb_substr($item['news_text'], 0, 250);
                $string = rtrim($string, "!,.-");
                echo htmlspecialchars_decode($string) . " ‚Ä¶"; 
              ?>
            </div>
            <div class="news-footer">
              <a href="/news/view/mane/<?php echo $item['news_id'] ?>" class="read-more">
                –ü–æ–¥—Ä–æ–±–Ω–µ–µ <i class="fa fa-arrow-right"></i>
              </a>
            </div>
          </div>
        </div>
        <?php endforeach; ?>
      </div>
      
      <?php if(isset($pagination)): ?>
      <div class="pagination-wrapper" data-aos="fade-up">
        <?php echo $pagination ?> 
      </div>
      <?php endif; ?>
    <?php endif; ?>
  </section>
</div>

<script>
$(document).ready(function() {
  // Search functionality
  $('#searchForm').on('submit', function(e) {
    e.preventDefault();
    var searchText = $('#Search_text').val();
    if (searchText.trim() !== '') {
      window.location.href = '/search/?&' + encodeURIComponent(searchText);
    }
  });

  // Hero slider functionality
  let currentSlide = 0;
  const slides = document.querySelectorAll('.slider-item');
  const totalSlides = slides.length;

  function showSlide(index) {
    slides.forEach((slide, i) => {
      slide.classList.remove('active');
      if (i === index) {
        slide.classList.add('active');
      }
    });
  }

  function nextSlide() {
    currentSlide = (currentSlide + 1) % totalSlides;
    showSlide(currentSlide);
  }

  // Auto-advance slides
  if (totalSlides > 1) {
    setInterval(nextSlide, 5000);
  }

  // Initialize first slide
  showSlide(0);

  // AJAX search functionality
  $('#Search_text').on('input', function() {
    var searchText = $(this).val();
    if (searchText.length >= 3) {
      $.ajax({
        url: '/main/ajax',
        method: 'POST',
        data: {
          Search_text2: searchText
        },
        success: function(response) {
          var data = JSON.parse(response);
          var resultsHtml = '';
          
          if (data.status === 'success' && data.success.length > 0) {
            data.success.forEach(function(result) {
              resultsHtml += '<div class="search-result-item">';
              resultsHtml += '<h4>' + result.title + '</h4>';
              resultsHtml += '<p>' + result.fullstr + '</p>';
              resultsHtml += '<small>–ù–∞–π–¥–µ–Ω–æ: ' + result.total + ' —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤</small>';
              resultsHtml += '</div>';
            });
          } else {
            resultsHtml = '<div class="no-results">–ü–æ –≤–∞—à–µ–º—É –∑–∞–ø—Ä–æ—Å—É –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</div>';
          }
          
          $('#searchResults').html(resultsHtml);
        },
        error: function() {
          $('#searchResults').html('<div class="error">–û—à–∏–±–∫–∞ –ø–æ–∏—Å–∫–∞</div>');
        }
      });
    } else {
      $('#searchResults').empty();
    }
  });
});
</script>

<style>
.search-result-item {
  background: rgba(30, 41, 59, 0.8);
  border-radius: 8px;
  padding: 10px;
  margin: 5px 0;
  border: 1px solid rgba(59, 130, 246, 0.2);
}

.search-result-item h4 {
  color: #f1f5f9;
  font-size: 0.9rem;
  margin-bottom: 5px;
}

.search-result-item p {
  color: #cbd5e1;
  font-size: 0.8rem;
  margin-bottom: 5px;
}

.search-result-item small {
  color: #94a3b8;
  font-size: 0.7rem;
}

.no-results, .error {
  color: #94a3b8;
  text-align: center;
  padding: 10px;
  font-style: italic;
}

.error {
  color: #ef4444;
}
</style>
