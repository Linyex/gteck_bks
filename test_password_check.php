<?php
require_once 'engine/main/db.php';
require_once 'engine/libs/GroupPasswordChecker.php';

echo "ðŸ§ª Ð¢Ð•Ð¡Ð¢Ð˜Ð ÐžÐ’ÐÐÐ˜Ð• ÐŸÐ ÐžÐ’Ð•Ð ÐšÐ˜ ÐŸÐÐ ÐžÐ›Ð•Ð™:\n\n";

// ÐŸÐ¾Ð»ÑƒÑ‡Ð°ÐµÐ¼ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð³Ñ€ÑƒÐ¿Ð¿
$groups = Database::fetchAll('SELECT group_name, password FROM group_passwords WHERE is_active = 1 LIMIT 3');

foreach ($groups as $group) {
    $groupName = $group['group_name'];
    echo "ðŸ”‘ Ð“Ñ€ÑƒÐ¿Ð¿Ð°: $groupName\n";
    
    // Ð¢ÐµÑÑ‚ 1: ÐÐµÐ¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ð¹ Ð¿Ð°Ñ€Ð¾Ð»ÑŒ
    $wrongPassword = "wrong123";
    $result1 = GroupPasswordChecker::checkPassword($groupName, $wrongPassword);
    echo "   ÐÐµÐ¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ð¹ Ð¿Ð°Ñ€Ð¾Ð»ÑŒ '$wrongPassword': " . ($result1 ? "âŒ ÐžÐ¨Ð˜Ð‘ÐšÐ! ÐŸÑ€Ð¾Ð¿ÑƒÑÑ‚Ð¸Ð»!" : "âœ… Ð—Ð°Ð±Ð»Ð¾ÐºÐ¸Ñ€Ð¾Ð²Ð°Ð»") . "\n";
    
    // Ð¢ÐµÑÑ‚ 2: ÐŸÐ¾Ð¿Ñ‹Ñ‚ÐºÐ° Ð¿Ð¾Ð½ÑÑ‚ÑŒ Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ð¹ Ð¿Ð°Ñ€Ð¾Ð»ÑŒ (Ð´Ð»Ñ Ð´ÐµÐ¼Ð¾Ð½ÑÑ‚Ñ€Ð°Ñ†Ð¸Ð¸ - Ð½Ðµ Ð±ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ð¾!)
    // Ð’ Ñ€ÐµÐ°Ð»ÑŒÐ½Ð¾ÑÑ‚Ð¸ Ð¿Ð°Ñ€Ð¾Ð»Ð¸ Ð´Ð¾Ð»Ð¶Ð½Ñ‹ Ð·Ð½Ð°Ñ‚ÑŒ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð°Ð´Ð¼Ð¸Ð½Ð¸ÑÑ‚Ñ€Ð°Ñ‚Ð¾Ñ€Ñ‹
    echo "   (Ð”Ð»Ñ Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ Ð½ÑƒÐ¶Ð½Ð¾ Ð·Ð½Ð°Ñ‚ÑŒ Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ð¹ Ð¿Ð°Ñ€Ð¾Ð»ÑŒ Ð³Ñ€ÑƒÐ¿Ð¿Ñ‹)\n";
    
    echo "\n";
}

// Ð”Ð¾Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ð¹ Ñ‚ÐµÑÑ‚ Ñ Ð¿ÑƒÑÑ‚Ñ‹Ð¼Ð¸ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸ÑÐ¼Ð¸
echo "ðŸ” Ð”ÐžÐŸÐžÐ›ÐÐ˜Ð¢Ð•Ð›Ð¬ÐÐ«Ð• Ð¢Ð•Ð¡Ð¢Ð«:\n";
echo "ÐŸÑƒÑÑ‚Ð¾Ð¹ Ð¿Ð°Ñ€Ð¾Ð»ÑŒ: " . (GroupPasswordChecker::checkPassword("Ð¢111", "") ? "âŒ ÐŸÑ€Ð¾Ð¿ÑƒÑÑ‚Ð¸Ð»" : "âœ… Ð—Ð°Ð±Ð»Ð¾ÐºÐ¸Ñ€Ð¾Ð²Ð°Ð»") . "\n";
echo "ÐÐµÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÑŽÑ‰Ð°Ñ Ð³Ñ€ÑƒÐ¿Ð¿Ð°: " . (GroupPasswordChecker::checkPassword("ÐÐµÑ‚Ð“Ñ€ÑƒÐ¿Ð¿Ñ‹", "123") ? "âŒ ÐŸÑ€Ð¾Ð¿ÑƒÑÑ‚Ð¸Ð»" : "âœ… Ð—Ð°Ð±Ð»Ð¾ÐºÐ¸Ñ€Ð¾Ð²Ð°Ð»") . "\n";

echo "\nâœ… Ð¢ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð¾!\n";
echo "ðŸ’¡ Ð¢ÐµÐ¿ÐµÑ€ÑŒ Ð½ÑƒÐ¶Ð½Ð¾ Ð¿Ñ€Ð¾Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð½Ð° Ñ€ÐµÐ°Ð»ÑŒÐ½Ð¾Ð¼ ÑÐ°Ð¹Ñ‚Ðµ Ñ Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ð¼Ð¸ Ð¿Ð°Ñ€Ð¾Ð»ÑÐ¼Ð¸ Ð³Ñ€ÑƒÐ¿Ð¿.\n";
?> 